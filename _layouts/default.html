<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    
    {%- seo -%}


    
    <link rel="stylesheet" href="{{ "/assets/style.css" | absolute_url }}">
    

    {%- feed_meta -%}


    <!-- Sitemap -->  
<link rel="sitemap" type="application/xml" href="{{ "/sitemap.xml" | absolute_url }}">






{% if jekyll.environment == 'production' %}

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SHN1H6Y4R5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SHN1H6Y4R5');
</script>
{% endif %}

  </head>
  <body>

    <header>
      <nav>
          <ul>
              <li><a href="{{ site.url }}/">home</a></li>
              <li><a href="{{ site.url }}/posts">posts</a></li>
          </ul>
      </nav>
    </header>
    
    <main>

    {{ content }}
    
    </main>

    <script src="{{ site.url }}/assets/script.js"></script>
    
    
    <!-- mathjax -->
    {% capture page_content %}{{ page.content }}{% endcapture %}
      {% if page_content contains '\[' or page_content contains '\(' %}
       <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
       MathJax.Hub.Config({
       showMathMenu: false
       });
       </script>
    {% endif %}


<!-- mermaid -->
{% capture page_content %}{{ page.content }}{% endcapture %}
{% if page_content contains 'class="language-mermaid"' %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://unpkg.com/mermaid@8.9.3/dist/mermaid.min.js"></script>
<script>
  $(document).ready(function () {
    mermaid.initialize({
      startOnLoad: true,
      theme: "default"
    });
    window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
  });
</script>
{% endif %}
 





<!-- remove this -->


<script>
document.addEventListener('DOMContentLoaded', function(){

    // CSS styles
    var modalStyles = `
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.2);
            backdrop-filter: blur(2px);
        }

        .modal-content {
            background-color: var(--bg);
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width:7in;
        }

        .modal-footer {
            text-align: right;
        }

        .button {
            padding: 10px 20px;
            background-color: #007bff; 
            border: none;
            cursor: pointer;
            text-decoration:none;
        }

        .button:hover {
            color:var(--bg)
        }
        .button.secondary {
            background-color: #ccc;
        }
        p#linkInfo {
    margin-bottom: 30px;
}
a#proceedBtn {
    margin: 5px;
    padding: 8px 20px;
}
    `;

    // HTML modal structure
    var modalHTML = `
        <div id="externalLinkModal" class="modal">
            <div class="modal-content">
                <h2>External Link</h2>
                <p id="linkInfo">Do you want to proceed to the external link?</p>
                <div class="modal-footer">
                    <button id="cancelBtn" class="button secondary">Cancel</button>
                    <a id="proceedBtn" class="button" href="#" >Proceed</a>
                </div>
            </div>
        </div>
    `;

    // Append CSS styles to head
    var style = document.createElement('style');
    style.innerHTML = modalStyles;
    document.head.appendChild(style);

    // Append HTML modal structure to body
    var modalContainer = document.createElement('div');
    modalContainer.innerHTML = modalHTML;
    document.body.appendChild(modalContainer);

    // Check for external links and attach event listener
    var links = document.getElementsByTagName('a');
    for (var i = 0; i < links.length; i++) {
        var href = links[i].getAttribute('href');
        if (href && !href.startsWith('#') && !href.startsWith('tel:') && !isSameDomain(href)) {
            links[i].addEventListener('click', function(e){
                e.preventDefault();
                var modal = document.getElementById('externalLinkModal');
                var proceedBtn = document.getElementById('proceedBtn');
                var cancelBtn = document.getElementById('cancelBtn');
                var linkTitle = this.getAttribute('title') || this.textContent || this.innerText || 'Untitled';
                var linkURL = this.getAttribute('href');
                if (linkURL.startsWith('mailto:')) {
                    document.getElementById('linkInfo').innerHTML = 'Do you want to send an email to <b>' + linkURL.substring(7) + '</b>  ?';
                } else {
                    document.getElementById('linkInfo').innerHTML = 'Do you want to proceed this will take you to <b>' + linkTitle + '</b> (' + linkURL.replace(/[?&]ref=[^&]*/, '') + ') ?';
                }
                // Check if linkURL contains ?rel=
if (linkURL.includes('?ref=')) {
    // If linkURL already has ?ref=, don't add ?ref=
    proceedBtn.href = linkURL;
} else {
    // If linkURL doesn't have ?rel=, add ?ref=
    // Check if linkURL contains any query parameters
    if (linkURL.includes('?')) {
        // If linkURL already has query parameters, append '&ref=' followed by window.location.hostname
        proceedBtn.href = linkURL + '&ref=' + window.location.hostname;
    } else {
        // If linkURL doesn't have any query parameters, append '?ref=' followed by window.location.hostname
        proceedBtn.href = linkURL + '?ref=' + window.location.hostname;
    }
}

                modal.style.display = 'block';
                cancelBtn.addEventListener('click', function(){
                    modal.style.display = 'none';
                });
                window.addEventListener('click', function(event) {
                    if (event.target == modal) {
                        modal.style.display = 'none';
                    }
                });
            });
        }
    }

    // Function to check if the given URL is from the same domain
    function isSameDomain(url) {
        var a = document.createElement('a');
        a.href = url;
        return a.hostname === window.location.hostname;
    }
});
</script>


<!-- remove this -->
    

  </body>
</html>
