---
layout: default
---

<article>

    <header>
        <h1>{{ page.title }}</h1>
        <time datetime="{{ page.date | date: "%Y-%m-%d" }}">{{ page.date | date: "%B %-d, %Y" }}</time>
        ‚óè <span id="viewCount"></span> <span>Views</span>
    </header>

    <aside>
        <details>
            <summary>Table of Content</summary>
            {% toc %}
        </details>
    </aside>

{{ content }}

</article>

<script>
    window.onload = function() { 
        function fetchViewCount(postId) {
            fetch('https://api.mrinal.tk/views', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: 'post_id=' + postId
            })
            .then(response => response.json())
            .then(data => {
                if (data && data.view_count !== undefined) {
                    document.getElementById('viewCount').innerText = data.view_count;
                } else {
                    console.error('Failed to fetch view count:', data.error);
                }
            })
            .catch(error => console.error('Error fetching view count:', error));
        }
     
        const postId = '{{ page.url | remove_first: '/' }}';  
        fetchViewCount(postId);
    };
    </script>


<div style="padding-top: 100px;">
    <button id="likeBtn" onclick="sendFeedback('like')">Like</button>
    <button id="dislikeBtn" onclick="sendFeedback('dislike')">Dislike</button>
    <button id="okayBtn" onclick="sendFeedback('okay')">Okay</button>

</div>

<style>
    button{
        padding: 5px 10px;
             
            cursor: pointer;
            border: 0px solid #ccc;
            border-radius: 5px; 
    }
</style>

<script>
    function sendFeedback(action) {
        var post_id = '{{ page.url | remove_first: '/' }}';  
        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'https://api.mrinal.tk/feedback');
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhr.onload = function() {
            if (xhr.status === 200) {
                var response = JSON.parse(xhr.responseText);
                console.log('Feedback:', response);
                updateButtonCounts(response);
            }
        };
        xhr.send('post_id=' + post_id + '&action=' + action);
    }

    function updateButtonCounts(counts) {
        document.getElementById('likeBtn').innerText = 'LikeüòÄ (' + counts.like + ')';
        document.getElementById('dislikeBtn').innerText = 'Dislikeüëé (' + counts.dislike + ')';
        document.getElementById('okayBtn').innerText = 'Okayüòï (' + counts.okay + ')';
    }
</script>